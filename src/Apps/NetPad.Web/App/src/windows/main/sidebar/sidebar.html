<template as-custom-element="script-folder">
    <bindable property="folder"></bindable>
    <bindable property="vm"></bindable>

    <div class="list-group">
        <div class="list-group-item script-folder-item">
                <span click.trigger="folder.expanded = !folder.expanded">
                    <i class="action-icon text-orange bi ${folder.expanded ? 'bi-dash' : 'bi-plus'}"></i>
                    <i class="bi bi-folder-fill text-yellow"></i> ${folder.name}
                </span>
            <i class="action-icon bi bi-box-arrow-up-right open-folder-button text-blue float-end"
               title="Open"
               click.trigger="vm.openScriptsFolder(folder)"></i>
        </div>

        <div class="list-group-item" show.bind="folder.expanded">
            <div class="list-group">
                <div class="list-group-item" repeat.for="childFolder of folder.folders">
                    <script-folder folder.bind="childFolder" vm.bind="vm"></script-folder>
                </div>

                <div class="list-group-item">
                    <div class="list-group">
                        <div class="list-group-item script-item text-truncate"
                             repeat.for="script of folder.scripts"
                             title.bind="script.path"
                             click.trigger="vm.session.open(script.path)">
                            <i class="bi bi-square" style="visibility: hidden"></i>
                            <i class="bi bi-file-code-fill"></i> ${script.name}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<div id="connection-list" class="flex-grow-height-restricted d-flex flex-column pt-2">
    <h6>
        <b class="ps-3">Connections</b>
        <i class="action-icon bi bi-cloud-plus-fill float-end pe-2"
           title="Add Connection"
           click.trigger="addConnection()"></i>
        <hr class="m-0 mt-2" style="height: 2px"/>
    </h6>

    <div class="flex-grow-1 d-flex align-items-center justify-content-center">
        <p class="text-muted">
            No connections
        </p>
    </div>
</div>

<div id="script-list" class="pt-2 flex-grow-height-restricted d-flex flex-column">
    <h6>
        <b class="ps-3">Scripts</b>
        <i class="action-icon bi bi-arrows-expand float-end pe-2"
           title="Expand All"
           click.trigger="expandAllFolders(rootScriptFolder)"></i>
        <i class="action-icon bi bi-arrows-collapse hover-text-white float-end pe-2"
           title="Collapse All"
           click.trigger="collapseAllFolders(rootScriptFolder)"></i>
        <hr class="m-0 mt-2" style="height: 2px"/>
    </h6>

    <script-folder folder.bind="rootScriptFolder"
                   vm.bind="$this"></script-folder>
</div>
